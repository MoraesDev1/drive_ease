import 'package:sqflite/sqflite.dart';
import 'package:path/path.dart';

class LocalDatabase {
  static final Map<int, List<String>> _migrationScripts = {
    1: [
      '''
      CREATE TABLE corrida (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        datahora_start TEXT(50),
        start_km REAL,
        datahora_stop TEXT(50),
        stop_km REAL,
        ganhos REAL
      );
    ''',
      '''
      CREATE TABLE servico (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        tipo TEXT,
        data TEXT,
        km REAL,
        descricao TEXT,
        valor REAL
      );
    ''',
      '''CREATE TABLE start (
        datahora_start TEXT(50),
        start_km REAL
      );
    ''',
      '''CREATE TABLE meta (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        inicio TEXT(50),
        fim TEXT(50),
        valor REAL,
        descricao TEXT
);
''',
      '''INSERT INTO corrida (datahora_start, start_km, datahora_stop, stop_km, ganhos) VALUES
    ('2024-01-01 08:15:00', 100.5, '2024-01-01 09:30:00', 150.2, 75.0),
    ('2024-01-02 09:00:00', 150.2, '2024-01-02 10:20:00', 200.8, 90.5),
    ('2024-01-03 08:30:00', 200.8, '2024-01-03 10:00:00', 250.1, 80.2),
    ('2024-01-04 07:45:00', 250.1, '2024-01-04 09:10:00', 300.0, 95.7),
    ('2024-01-05 10:00:00', 300.0, '2024-01-05 11:30:00', 350.5, 85.3),
    ('2024-01-06 08:20:00', 350.5, '2024-01-06 09:40:00', 400.2, 70.0),
    ('2024-01-07 09:15:00', 400.2, '2024-01-07 10:45:00', 450.8, 88.6),
    ('2024-01-08 07:30:00', 450.8, '2024-01-08 09:00:00', 500.0, 82.4),
    ('2024-01-09 08:45:00', 500.0, '2024-01-09 10:10:00', 550.3, 90.1),
    ('2024-01-10 10:30:00', 550.3, '2024-01-10 11:55:00', 600.0, 95.0),
    ('2024-01-11 09:00:00', 600.0, '2024-01-11 10:20:00', 650.5, 88.2),
    ('2024-01-12 08:15:00', 650.5, '2024-01-12 09:35:00', 700.2, 92.6),
    ('2024-01-13 07:45:00', 700.2, '2024-01-13 09:10:00', 750.0, 79.8),
    ('2024-01-14 10:00:00', 750.0, '2024-01-14 11:20:00', 800.5, 85.0),
    ('2024-01-15 08:30:00', 800.5, '2024-01-15 10:00:00', 850.1, 91.3),
    ('2024-01-16 09:45:00', 850.1, '2024-01-16 11:15:00', 900.8, 78.5),
    ('2024-01-17 07:20:00', 900.8, '2024-01-17 08:40:00', 950.2, 83.7),
    ('2024-01-18 08:00:00', 950.2, '2024-01-18 09:25:00', 1000.0, 96.4),
    ('2024-01-19 09:30:00', 1000.0, '2024-01-19 10:50:00', 1050.3, 89.9),
    ('2024-01-20 07:50:00', 1050.3, '2024-01-20 09:15:00', 1100.5, 84.8),
    ('2024-02-01 09:15:00', 1100.5, '2024-02-01 10:35:00', 1150.2, 90.2),
    ('2024-02-01 10:30:00', 1150.2, '2024-02-01 11:50:00', 1200.0, 85.7),
    ('2024-02-01 12:00:00', 1200.0, '2024-02-01 13:20:00', 1250.5, 78.9),
    ('2024-02-01 13:30:00', 1250.5, '2024-02-01 14:50:00', 1300.1, 92.3),
    ('2024-02-01 15:00:00', 1300.1, '2024-02-01 16:20:00', 1350.8, 87.4),
    ('2024-02-02 09:00:00', 1350.8, '2024-02-02 10:20:00', 1400.0, 94.6),
    ('2024-02-02 10:30:00', 1400.0, '2024-02-02 11:50:00', 1450.3, 79.8),
    ('2024-02-02 12:00:00', 1450.3, '2024-02-02 13:20:00', 1500.5, 83.5),
    ('2024-02-02 13:30:00', 1500.5, '2024-02-02 14:50:00', 1550.1, 91.1),
    ('2024-02-02 15:00:00', 1550.1, '2024-02-02 16:20:00', 1600.2, 76.2),
    ('2024-02-03 09:15:00', 1600.2, '2024-02-03 10:35:00', 1650.0, 88.9),
    ('2024-02-03 10:30:00', 1650.0, '2024-02-03 11:50:00', 1700.5, 95.3),
    ('2024-02-03 12:00:00', 1700.5, '2024-02-03 13:20:00', 1750.8, 82.7),
    ('2024-02-03 13:30:00', 1750.8, '2024-02-03 14:50:00', 1800.0, 89.6),
    ('2024-02-03 15:00:00', 1800.0, '2024-02-03 16:20:00', 1850.3, 77.4),
    ('2024-02-04 09:00:00', 1850.3, '2024-02-04 10:20:00', 1900.5, 83.8),
    ('2024-02-04 10:30:00', 1900.5, '2024-02-04 11:50:00', 1950.1, 91.7),
    ('2024-02-04 12:00:00', 1950.1, '2024-02-04 13:20:00', 2000.2, 78.1),
    ('2024-02-04 13:30:00', 2000.2, '2024-02-04 14:50:00', 2050.0, 86.5),
    ('2024-02-04 15:00:00', 2050.0, '2024-02-04 16:20:00', 2100.5, 94.2),
    ('2024-02-05 09:15:00', 2100.5, '2024-02-05 10:35:00', 2150.2, 90.2),
    ('2024-02-05 10:30:00', 2150.2, '2024-02-05 11:50:00', 2200.0, 85.7),
    ('2024-02-05 12:00:00', 2200.0, '2024-02-05 13:20:00', 2250.5, 78.9),
    ('2024-02-05 13:30:00', 2250.5, '2024-02-05 14:50:00', 2300.1, 92.3),
    ('2024-02-05 15:00:00', 2300.1, '2024-02-05 16:20:00', 2350.8, 87.4),
    ('2024-02-06 09:00:00', 2350.8, '2024-02-06 10:20:00', 2400.0, 94.6),
    ('2024-02-06 10:30:00', 2400.0, '2024-02-06 11:50:00', 2450.3, 79.8),
    ('2024-02-06 12:00:00', 2450.3, '2024-02-06 13:20:00', 2500.5, 83.5),
    ('2024-02-06 13:30:00', 2500.5, '2024-02-06 14:50:00', 2550.1, 91.1),
    ('2024-02-06 15:00:00', 2550.1, '2024-02-06 16:20:00', 2600.2, 76.2),
    ('2024-02-07 09:15:00', 2600.2, '2024-02-07 10:35:00', 2650.0, 88.9),
    ('2024-02-07 10:30:00', 2650.0, '2024-02-07 11:50:00', 2700.5, 95.3),
    ('2024-02-07 12:00:00', 2700.5, '2024-02-07 13:20:00', 2750.8, 82.7),
    ('2024-02-07 13:30:00', 2750.8, '2024-02-07 14:50:00', 2800.0, 89.6),
    ('2024-02-07 15:00:00', 2800.0, '2024-02-07 16:20:00', 2850.3, 77.4),
    ('2024-02-08 09:00:00', 2850.3, '2024-02-08 10:20:00', 2900.5, 83.8),
    ('2024-02-08 10:30:00', 2900.5, '2024-02-08 11:50:00', 2950.1, 91.7),
    ('2024-02-08 12:00:00', 2950.1, '2024-02-08 13:20:00', 3000.2, 78.1),
    ('2024-02-08 13:30:00', 3000.2, '2024-02-08 14:50:00', 3050.0, 86.5),
    ('2024-02-08 15:00:00', 3050.0, '2024-02-08 16:20:00', 3100.5, 94.2),
    ('2024-02-09 09:15:00', 3100.5, '2024-02-09 10:35:00', 3150.2, 90.2),
    ('2024-02-09 10:30:00', 3150.2, '2024-02-09 11:50:00', 3200.0, 85.7),
    ('2024-02-09 12:00:00', 3200.0, '2024-02-09 13:20:00', 3250.5, 78.9),
    ('2024-02-09 13:30:00', 3250.5, '2024-02-09 14:50:00', 3300.1, 92.3),
    ('2024-02-09 15:00:00', 3300.1, '2024-02-09 16:20:00', 3350.8, 87.4),
    ('2024-02-10 09:00:00', 3350.8, '2024-02-10 10:20:00', 3400.0, 94.6),
    ('2024-02-10 10:30:00', 3400.0, '2024-02-10 11:50:00', 3450.3, 79.8),
    ('2024-02-10 12:00:00', 3450.3, '2024-02-10 13:20:00', 3500.5, 83.5),
    ('2024-02-10 13:30:00', 3500.5, '2024-02-10 14:50:00', 3550.1, 91.1),
    ('2024-02-10 15:00:00', 3550.1, '2024-02-10 16:20:00', 3600.2, 76.2);
''',
      '''
INSERT INTO servico (tipo, data, km, descricao, valor) VALUES
    ('Troca de Óleo', '2024-01-03', 2100.5, 'Revisão completa do veículo', 150.0),
    ('Manutenção de Rotina', '2024-01-05', 350.5, 'Troca de óleo e filtro', 80.0),
    ('Troca de Pneus', '2024-01-06', 2550.1, 'Troca de todos os pneus', 300.0),
    ('Lavagem/Limpeza', '2024-01-09', 2900.5, 'Lavagem completa', 50.0),
    ('Manutenção de Rotina', '2024-01-10', 600.0, 'Revisão completa do veículo', 150.0),
    ('Troca de Pneus', '2024-01-10', 800.5, 'Troca de todos os pneus', 300.0),
    ('Manutenção de Rotina', '2024-01-12', 3300.1, 'Reparo no sistema de direção', 120.0),
    ('Troca de Óleo', '2024-01-15', 350.5, 'Troca de óleo e filtro', 80.0),
    ('Troca de Pneus', '2024-01-15', 800.5, 'Troca de todos os pneus', 300.0),
    ('Manutenção de Rotina', '2024-01-18', 4100.5, 'Revisão completa do veículo', 150.0),
    ('Troca de Pneus', '2024-01-20', 4550.1, 'Troca de todos os pneus', 300.0),
    ('Lavagem/Limpeza', '2024-01-20', 1100.5, 'Lavagem completa', 50.0),
    ('Manutenção de Rotina', '2024-01-21', 4550.1, 'Troca de todos os pneus', 300.0),
    ('Manutenção de Rotina', '2024-01-24', 1400.0, 'Reparo no sistema de freios', 120.0),
    ('Lavagem/Limpeza', '2024-01-24', 5000.0, 'Lavagem completa', 50.0),
    ('Troca de Óleo', '2024-01-27', 5400.5, 'Reparo no sistema de transmissão', 120.0),
    ('Manutenção de Rotina', '2024-01-30', 1700.5, 'Troca de óleo e filtro', 80.0),
    ('Manutenção de Rotina', '2024-02-05', 2100.5, 'Revisão completa do veículo', 150.0),
    ('Troca de Pneus', '2024-02-10', 2550.1, 'Troca de todos os pneus', 300.0),
    ('Lavagem/Limpeza', '2024-02-15', 2900.5, 'Lavagem completa', 50.0),
    ('Manutenção de Rotina', '2024-02-20', 3300.1, 'Reparo no sistema de direção', 120.0),
    ('Troca de Óleo', '2024-02-24', 3700.2, 'Troca de óleo e filtro', 80.0),
    ('Manutenção de Rotina', '2024-02-24', 4100.5, 'Revisão completa do veículo', 150.0),
    ('Troca de Pneus', '2024-02-24', 4550.1, 'Troca de todos os pneus', 300.0),
    ('Lavagem/Limpeza', '2024-02-24', 5000.0, 'Lavagem completa', 50.0),
    ('Manutenção de Rotina', '2024-02-24', 5400.5, 'Reparo no sistema de transmissão', 120.0),
    ('Troca de Óleo', '2024-02-24', 5800.2, 'Troca de óleo e filtro', 80.0),
    ('Manutenção de Rotina', '2024-02-24', 6200.5, 'Revisão completa do veículo', 150.0),
    ('Troca de Pneus', '2024-02-24', 6650.1, 'Troca de todos os pneus', 300.0),
    ('Lavagem/Limpeza', '2024-02-24', 7000.0, 'Lavagem completa', 50.0),
    ('Manutenção de Rotina', '2024-02-24', 7400.5, 'Reparo no sistema de suspensão', 120.0),
    ('Manutenção de Rotina', '2024-02-24', 7800.0, 'Revisão completa do veículo', 150.0);
''',
    ],
  };

  static Future<Database> initDatabase(String fname) async {
    return await openDatabase(join(await getDatabasesPath(), fname),
        version: _migrationScripts.length, onCreate: (db, version) async {
      for (final script in _migrationScripts.values) {
        for (String sql in script) {
          await db.execute(sql);
        }
      }
    }, onUpgrade: (db, oldVersion, newVersion) async {
      for (int i = oldVersion + 1; i <= newVersion; i++) {
        for (String sql in (_migrationScripts[i] as List<String>)) {
          await db.execute(sql);
        }
      }
    });
  }
}
